{"version":3,"file":"index.es.js","sources":["../src/index.js"],"sourcesContent":["/* global codegen */\nimport { createElement as h } from 'react'\nimport { css } from 'emotion'\nimport { map, reduce, assign, omit } from 'emotion-utils'\n\nexport * from 'emotion'\n\nconst push = (obj, items) => Array.prototype.push.apply(obj, items)\n\nconst reactPropsRegex = codegen.require('./props')\nconst testOmitPropsOnStringTag = key => reactPropsRegex.test(key)\nconst testOmitPropsOnComponent = key => key !== 'theme' && key !== 'innerRef'\n\nexport default function(tag, cls, objs, vars = [], content) {\n  if (!tag) {\n    throw new Error(\n      'You are trying to create a styled element with an undefined component.\\nYou may have forgotten to import it.'\n    )\n  }\n\n  const componentTag = tag.displayName || tag.name || 'Component'\n  const spec = {\n    vars,\n    content,\n    objs,\n    tag,\n    cls\n  }\n  const newSpec =\n    tag.__emotion_spec !== undefined ? tag.__emotion_spec.concat(spec) : [spec]\n  const localTag = newSpec[0].tag\n\n  const omitFn =\n    typeof localTag === 'string'\n      ? testOmitPropsOnStringTag\n      : testOmitPropsOnComponent\n  function Styled(props, context) {\n    const getValue = v => {\n      if (v && typeof v === 'function') {\n        if (v.__emotion_class !== undefined) {\n          return `& .${v.__emotion_class}`\n        }\n        return v(props, context)\n      }\n\n      return v\n    }\n\n    let finalObjs = []\n\n    push(\n      finalObjs,\n      reduce(\n        newSpec,\n        (accum, spec) => {\n          push(accum, spec.objs)\n          if (spec.content) {\n            accum.push(spec.content.apply(null, map(spec.vars, getValue)))\n          }\n          accum.push(spec.cls)\n          return accum\n        },\n        []\n      )\n    )\n\n    if (props.className) {\n      push(finalObjs, props.className.split(' '))\n    }\n\n    const className = css(map(finalObjs, getValue))\n\n    return h(\n      localTag,\n      omit(\n        assign({}, props, {\n          ref: props.innerRef,\n          className\n        }),\n        omitFn\n      )\n    )\n  }\n\n  Styled.displayName = `styled(${componentTag})`\n  Styled.__emotion_spec = newSpec\n  Styled.__emotion_class = cls\n  return Styled\n}\n"],"names":["push","obj","items","Array","prototype","apply","reactPropsRegex","testOmitPropsOnStringTag","test","key","testOmitPropsOnComponent","tag","cls","objs","vars","content","Error","componentTag","displayName","name","spec","newSpec","__emotion_spec","undefined","concat","localTag","omitFn","Styled","props","context","getValue","v","__emotion_class","finalObjs","reduce","accum","map","className","split","css","h","omit","assign","innerRef"],"mappings":";;;;;AAAA;AACA,AAMA,IAAMA,OAAO,SAAPA,IAAO,CAACC,GAAD,EAAMC,KAAN;SAAgBC,MAAMC,SAAN,CAAgBJ,IAAhB,CAAqBK,KAArB,CAA2BJ,GAA3B,EAAgCC,KAAhC,CAAhB;CAAb;;AAEA,IAAMI,g0CAAN;AACA,IAAMC,2BAA2B,SAA3BA,wBAA2B;SAAOD,gBAAgBE,IAAhB,CAAqBC,GAArB,CAAP;CAAjC;AACA,IAAMC,2BAA2B,SAA3BA,wBAA2B;SAAOD,QAAQ,OAAR,IAAmBA,QAAQ,UAAlC;CAAjC;;AAEA,YAAe,UAASE,GAAT,EAAcC,GAAd,EAAmBC,IAAnB,EAA6C;MAApBC,IAAoB,uEAAb,EAAa;MAATC,OAAS;;MACtD,CAACJ,GAAL,EAAU;UACF,IAAIK,KAAJ,CACJ,8GADI,CAAN;;;MAKIC,eAAeN,IAAIO,WAAJ,IAAmBP,IAAIQ,IAAvB,IAA+B,WAApD;MACMC,OAAO;cAAA;oBAAA;cAAA;YAAA;;GAAb;MAOMC,UACJV,IAAIW,cAAJ,KAAuBC,SAAvB,GAAmCZ,IAAIW,cAAJ,CAAmBE,MAAnB,CAA0BJ,IAA1B,CAAnC,GAAqE,CAACA,IAAD,CADvE;MAEMK,WAAWJ,QAAQ,CAAR,EAAWV,GAA5B;;MAEMe,SACJ,OAAOD,QAAP,KAAoB,QAApB,GACIlB,wBADJ,GAEIG,wBAHN;WAISiB,MAAT,CAAgBC,KAAhB,EAAuBC,OAAvB,EAAgC;QACxBC,WAAW,SAAXA,QAAW,IAAK;UAChBC,KAAK,OAAOA,CAAP,KAAa,UAAtB,EAAkC;YAC5BA,EAAEC,eAAF,KAAsBT,SAA1B,EAAqC;yBACtBQ,EAAEC,eAAf;;eAEKD,EAAEH,KAAF,EAASC,OAAT,CAAP;;;aAGKE,CAAP;KARF;;QAWIE,YAAY,EAAhB;;SAGEA,SADF,EAEEC,OACEb,OADF,EAEE,UAACc,KAAD,EAAQf,IAAR,EAAiB;WACVe,KAAL,EAAYf,KAAKP,IAAjB;UACIO,KAAKL,OAAT,EAAkB;cACVf,IAAN,CAAWoB,KAAKL,OAAL,CAAaV,KAAb,CAAmB,IAAnB,EAAyB+B,IAAIhB,KAAKN,IAAT,EAAegB,QAAf,CAAzB,CAAX;;YAEI9B,IAAN,CAAWoB,KAAKR,GAAhB;aACOuB,KAAP;KARJ,EAUE,EAVF,CAFF;;QAgBIP,MAAMS,SAAV,EAAqB;WACdJ,SAAL,EAAgBL,MAAMS,SAAN,CAAgBC,KAAhB,CAAsB,GAAtB,CAAhB;;;QAGID,YAAYE,IAAIH,IAAIH,SAAJ,EAAeH,QAAf,CAAJ,CAAlB;;WAEOU,cACLf,QADK,EAELgB,KACEC,OAAO,EAAP,EAAWd,KAAX,EAAkB;WACXA,MAAMe,QADK;;KAAlB,CADF,EAKEjB,MALF,CAFK,CAAP;;;SAYKR,WAAP,eAA+BD,YAA/B;SACOK,cAAP,GAAwBD,OAAxB;SACOW,eAAP,GAAyBpB,GAAzB;SACOe,MAAP;;;;;;;;;"}